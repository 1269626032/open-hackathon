{% extends "base/base.html" %}

{% block style %}
    <link href="/static/css/oh.site.team.css" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="oh-main team" data-tid="{{ team.id }}" data-role="{{ role }}" data-lid="{{ team.leader.id }}"
         data-uid="{{ current_user.id }}">

        <div class="container ">
            <ul class="breadcrumbs">
                <li>当前黑客松： <a
                        href="{{ url_for('hackathon', hackathon_name=hackathon_name) }}">{{ hackathon_name }}</a>
                </li>
                <li> {{ team.name }}</li>
            </ul>
        </div>

        <div class="container ">
            <div class="team-left">
                <div class="warp">
                </div>
                <div class="warp">
                    <div class="team-desc">
                        <h5 class="title">团队简介</h5>
                        <p>{{ team.description }}</p>
                    </div>
                </div>
                <div class="warp">
                    <div class="oh-users" id="talent_list">
                    </div>
                </div>
            </div>

            <div class="team-right">
                <div class="warp">
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    {% if team.is_leader and not team.is_frozen %}
        <script id="team_item" type="text/x-jquery-tmpl">
            {% raw %}
            <div class="col-lg-2 col-md-4 col-xs-6" data-user >
                <div class="oh-item">
                    <div class="oh-header">
                        <div class="action" >
                            <img src="${$item.getUserLogo(user.avatar_url)}" onerror="javascript:this.src='/static/pic/anon_user.png'">
                            {{if $item.isNotLeader(user.id) }}
                                <div class=" btn-group btn-group-justified" role="group" aria-label="Justified button group">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-sm btn-danger" data-id=${id} data-role="denied">踢出</button>
                                    </div>
                                    {{if status == 0}}
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-sm btn-info" data-id=${id} data-role="approved">同意</button>
                                    </div>
                                    {{/if}}
                                </div>
                            {{/if}}
                        </div>
                    </div>
                    <div class="oh-body">
                        <p class="text-center">
                            <a href="javascript:;">${user.nickname}</a><br/>
                            <span>${$item.getTitle(user.id, status)}</span>
                        </p>
                    </div>
                </div>
            </div>
            {% endraw %}

        </script>
    {% else %}
        <script id="team_item" type="text/x-jquery-tmpl">
            {% raw %}
            <div class="col-lg-2 col-md-4 col-xs-6" data-user >
                <div class="oh-item">
                    <div class="oh-header" data-parent>
                        <div>
                            <a href="/user/p_${id}">
                             <img src="${$item.getUserLogo(user.avatar_url)}" onload="oh.comm.imgLoad(this)"  onerror="javascript:this.src='/static/pic/monkey-104-104px.jpg'">
                            </a>
                        </div>
                    </div>
                    <div class="oh-body">
                        <p class="text-center">
                             <a href="/user/p_${id}">${user.nickname}</a><br/>
                            <span>${$item.getTitle(user.id, status)}</span>
                        </p>
                    </div>
                </div>
            </div>
            {% endraw %}

        </script>
    {% endif %}
    <script type="text/javascript" src="/static/js/jquery/bootstrapValidator.js"></script>
    <script type="text/javascript" src="/static/js/views/oh.site.team.js"></script>
{% endblock %}
