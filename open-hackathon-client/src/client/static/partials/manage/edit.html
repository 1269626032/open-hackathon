<div class="manage-edit">
  <uib-tabset class="m-tabs">
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.INFORMATION' | translate}}">
      <ng-form name="activitForm" class="form-horizontal" novalidate>
        <fieldset class="detail-wrapper">
          <div class="form-group">
            <label class="col-sm-2 control-label">名称</label>
            <div class="col-sm-10">
              <p class="form-control-static">{{modules.name}}</p>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error': activitForm.display_name.$touched && activitForm.display_name.$invalid,'has-success':activitForm.display_name.$valid}">
            <label for="inputPassword" class="col-sm-2 control-label">显示名称</label>
            <div class="col-sm-10 required">
              <input type="text" class="form-control" name="display_name" placeholder="显示名称" ng-model="modules.display_name" ng-trim="true" ng-minlength="3" ng-maxlength="8" required>
              <div class="messages" ng-messages="activitForm.display_name.$error" ng-if="activitForm.display_name.$touched && activitForm.display_name.$invalid">
                <span ng-message="minlength"><i class="fa fa-close" uib-tooltip="Your name is too short." tooltip-placement="right auto" ></i></span>
                <span ng-message="maxlength"><i class="fa fa-close" uib-tooltip="Your name is too long." tooltip-placement="right auto" ></i></span>
                <span ng-message="required"><i class="fa fa-close" uib-tooltip="请输入英文小写字母、数字及下划线、中划线" tooltip-placement="right auto"></i></span>
              </div>
              <div class="messages" ng-if="activitForm.display_name.$touched && activitForm.display_name.$valid">
                <i class="fa fa-check"></i>
              </div>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error': activitForm.tags.$touched && activitForm.tags.$invalid,'has-success':activitForm.tags.$touched && activitForm.tags.$valid}">
            <label for="inputPassword" class="col-sm-2 control-label">标签</label>
            <div class="col-sm-10 control-addon">
              <tags-input ng-model="tag" name="tags" placeholder="tag" min-length="1">
                <i class="control-icon fa fa-tag"></i>
              </tags-input>
              <div class="messages" ng-if="activitForm.tags.$touched && activitForm.tags.$valid">
                <i class="fa fa-check"></i>
              </div>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-success':activitForm.location.$touched && activitForm.location.$valid}">
            <label for="inputPassword" class="col-sm-2 control-label">活动地址</label>
            <div class="col-sm-10 control-addon">
              <input type="text" class="form-control" name="location" placeholder="线上/线下地址" ng-model="modules.config.location">
              <i class="control-icon fa fa-map-marker"></i>
              <div class="messages" ng-if="activitForm.location.$touched && activitForm.location.$valid">
                <i class="fa fa-check"></i>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword" class="col-sm-2 control-label">活动时间</label>
            <div class="col-sm-5 control-addon required" ng-class="{'has-error': activitForm.event_start_time.$touched && activitForm.event_start_time.$invalid,'has-success':activitForm.event_start_time.$touched && activitForm.event_start_time.$valid}">
              <input type="datetime-local" class="form-control" name="event_start_time" placeholder="开始时间" datetime-picker="yyyy/MM/dd hh:mm" ng-model="modules.event_start_time" min-date="minDate" required>
              <i class="control-icon fa fa-calendar"></i>
              <div class="messages" ng-messages="activitForm.event_start_time.$error" ng-if="activitForm.event_start_time.$touched && activitForm.event_start_time.$invalid">
                <span ng-message="required"><i class="fa fa-close" uib-tooltip="请填写活动开始时间" tooltip-placement="right auto"></i></span>
              </div>
              <div class="messages" ng-if="activitForm.event_start_time.$touched && activitForm.event_start_time.$valid">
                <i class="fa fa-check"></i>
              </div>
            </div>
            <div class="col-sm-5 control-addon" ng-class="{'has-error': activitForm.event_end_time.$touched && activitForm.event_end_time.$invalid,'has-success':activitForm.event_end_time.$touched && activitForm.event_end_time.$valid}">
              <input 
                type="datetime-local" 
                class="form-control" 
                name="event_end_time" 
                placeholder="结束时间" 
                ng-min="modules.event_start_time" 
                ng-model="modules.event_end_time" 
                ng-focus="openDatetime()" 
                ng-click="open.date1 = true"
                is-open="open.date1" 
                datetime-local="yyyy/MM/dd hh:mm"
                datetime-picker="yyyy/MM/dd hh:mm" 
                min-date="modules.event_start_time"
                timepicker-options="{'show-meridian':true}"
                required>
              <i class="control-icon fa fa-calendar"></i>
              <div class="messages" ng-messages="activitForm.event_end_time.$error" ng-if="activitForm.event_end_time.$touched && activitForm.event_end_time.$invalid">
                <span ng-message="min"><i class="fa fa-close" uib-tooltip="结束时间不能小于开始时间" tooltip-placement="right auto" ></i></span>
                <span ng-message="required"><i class="fa fa-close" uib-tooltip="请填写活动结束时间" tooltip-placement="right auto"></i></span>
              </div>
              <div class="messages" ng-if="activitForm.event_end_time.$touched && activitForm.event_end_time.$valid">
                <i class="fa fa-check"></i>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword" class="col-sm-2 control-label">报名时间</label>
            <div class="col-sm-5 control-addon">
              <input type="text" class="form-control" placeholder="开始时间" ng-model="modules.registration_start_time">
              <i class="control-icon fa fa-calendar"></i>
            </div>
            <div class="col-sm-5 control-addon">
              <input type="text" class="form-control" placeholder="结束时间" ng-model="modules.registration_end_time">
              <i class="control-icon fa fa-calendar"></i>
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword" class="col-sm-2 control-label">评分时间</label>
            <div class="col-sm-5 control-addon">
              <input type="text" class="form-control" placeholder="开始时间" ng-model="modules.judge_start_time">
              <i class="control-icon fa fa-calendar"></i>
            </div>
            <div class="col-sm-5 control-addon">
              <input type="text" class="form-control" placeholder="结束时间" ng-model="modules.judge_end_time">
              <i class="control-icon fa fa-calendar"></i>
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error': activitForm.ribbon.$touched && activitForm.ribbon.$invalid,'has-success':activitForm.ribbon.$touched && activitForm.ribbon.$valid}">
            <label for="inputPassword" class="col-sm-2 control-label">广告语</label>
            <div class="col-sm-10">
              <input type="text" name="ribbon" class="form-control" placeholder="" ng-model="modules.ribbon">
            </div>
          </div>
          <div class="form-group" ng-class="{'has-error': activitForm.max_enrollment.$touched && activitForm.max_enrollment.$invalid,'has-success':activitForm.max_enrollment.$valid}">
            <label for="inputPassword" class="col-sm-2 control-label">报名人数</label>
            <div class="col-sm-10 control-addon">
              <input type="text" class="form-control" name="max_enrollment" string-to-number ng-model="modules.config.max_enrollment" ng-trim="true" ng-minlength="3" ng-maxlength="8" required>
              <i class="control-icon fa fa-user-plus"></i>
              <div class="messages" ng-messages="activitForm.max_enrollment.$error" ng-if="activitForm.max_enrollment.$touched">
                <span ng-message="minlength"><i class="fa fa-close" uib-tooltip="Your name is too short." tooltip-placement="right auto" tooltip-is-open="true"></i></span>
                <span ng-message="maxlength"><i class="fa fa-close" uib-tooltip="Your name is too long." tooltip-placement="right auto" tooltip-is-open="true"></i></span>
                <span ng-message="required"><i class="fa fa-close" uib-tooltip="请输入英文小写字母、数字及下划线、中划线" tooltip-placement="right auto" tooltip-is-open="true"></i></span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword" class="col-sm-2 control-label">简介</label>
            <div class="col-sm-10">
              <textarea class="form-control" ng-model="modules.short_description"></textarea>
            </div>
          </div>
          {{modules}}
        </fieldset>
      </ng-form>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.BANNER' | translate }}">
      <ng-form name="bannersForm">
        <fieldset class="banners clearfix">
          <div class="item" ng-repeat="banner in modules.banners track by $index">
            <img src="{{banner}}" static-image max-width="298" max-height="168">
            <button class="btn btn-sm btn-danger" ng-click="delBanner($index)"><i class="fa fa-times"></i>
              <ANY translate="DELETE">DELETE</ANY>
            </button>
          </div>
          <div class="item create" ng-click="showAddBannerDialog()">
            <h3><i class="fa fa-cloud-upload"></i> 添加图片</h3>
            <small>推荐尺寸<span class="text-red">752*420</span>px 图片</small>
          </div>
        </fieldset>
      </ng-form>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.DETAILS' | translate}}">
      <ng-form name="descriptionForm">
        <fieldset class="description-wrapper">
          <div>
            <textarea name="description" ckeditor ng-model="modules.description" height="500"></textarea>
          </div>
        </fieldset>
      </ng-form>
    </uib-tab>
    <uib-tab heading="{{'EDIT_ACTIVITY_TABS.PROVIDERS' | translate}}">
      <ng-form name="providerForm">
        <fieldset class="provider-wrapper text-center provider-group-default">
          <div class="form-group">
            <label class="provider provider-success windows">
              Microsoft Account
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.windows" ng-change="providerChange(provider.windows,1)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success github">
              Github
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.github" ng-change="providerChange(provider.github,2)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success qq">
              QQ
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.qq" ng-change="providerChange(provider.qq,4)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success weibo">
              Weibo
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.weibo" ng-change="providerChange(provider.weibo,8)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success alauda">
              alauda 灵雀云
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.alauda" ng-change="providerChange(provider.alauda,32)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          <div class="form-group">
            <label class="provider provider-success gitcafe">
              Gitcafe
            </label>
            <label class="switchbox switchbox-success switchbox-inline">
              <input type="checkbox" ng-model="provider.gitcafe" ng-change="providerChange(provider.gitcafe,16)">
              <span class="switchbox-handle" data-on="On" data-off="Off"><i></i></span>
            </label>
          </div>
          {{modules.config.login_provider}}
        </fieldset>
      </ng-form>
    </uib-tab>
  </uib-tabset>
</div>
